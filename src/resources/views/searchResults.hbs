<h2>K·∫øt qu·∫£ t√¨m ki·∫øm cho: "{{keyword}}"</h2>

<div class="container-fluid mt-4">
  <div class="row">
    <!-- Sidebar Danh M·ª•c -->
    <div class="col-md-3">
      <div class="category-sidebar p-3 rounded" style="background-color: #fdf0f6;">
        <!-- Kho·∫£ng gi√° -->
        <div class="price-range mb-4">
          <h4 class="fw-bold text-primary">Kho·∫£ng Gi√° S√°ch</h4>
          <input
            type="range"
            id="priceRange"
            min="0"
            max="1000000"
            step="10000"
            value="{{query.maxPrice}}"
            class="form-range"
            style="accent-color: #f28ab2;"
          />
          <p class="mt-2">
            Gi√° t·ªëi ƒëa:
            <strong><span id="priceValue">{{formatNumber query.maxPrice}}</span></strong> VND
          </p>
        </div>

        <!-- Danh m·ª•c -->
        <div class="category-filter">
          <h4 class="fw-bold text-primary">Danh m·ª•c</h4>
          <input
            type="text"
            id="categorySearch"
            placeholder="T√¨m danh m·ª•c..."
            class="form-control mb-3"
            style="border-radius: 25px; padding-left: 15px;"
          />

          <ul id="categoryList" class="list-unstyled" style="max-height: 220px; overflow-y: auto;">
            {{#each categories}}
            <li class="category-item">
              <label>
                <input
                  type="checkbox"
                  value="{{this.TenDanhMuc}}"
                  data-id="{{this.DanhMucID}}"
                  {{#if (includes ../query.categories this.DanhMucID)}}checked{{/if}}
                />
                {{this.TenDanhMuc}}
              </label>
            </li>
            {{/each}}
          </ul>

          <!-- N√∫t l·ªçc -->
          <div class="d-grid mt-3">
            <input type="hidden" name="q" value="{{keyword}}" />
            <button id="filterBtn" class="btn w-100 fw-bold d-flex justify-content-center align-items-center gap-2"
              style="background-color: #f28ab2; border: none; border-radius: 30px; padding: 10px 16px;">
              <i class="bi bi-funnel-fill"></i> L·ªçc s·∫£n ph·∫©m
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- N·ªôi dung danh m·ª•c -->
    <div class="col-md-9">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="featured-title">{{categoryName}}</h4>
        <select class="form-select w-auto">
          <option selected>S·∫£n ph·∫©m n·ªïi b·∫≠t</option>
          <option value="1">Gi√° tƒÉng d·∫ßn</option>
          <option value="2">Gi√° gi·∫£m d·∫ßn</option>
        </select>
      </div>

      <!-- Hi·ªÉn th·ªã danh s√°ch s·∫£n ph·∫©m -->
      <div class="row product-list">
        {{#each listbook}}
        <div class="col-md-3 m-0">
          <div class="product-card-container">
            <a href="/products?id={{this.SanPhamID}}" style="text-decoration: none;">
              <div class="product-card">
                <div class="product-image">
                  <img src="{{this.Anh}}" alt="S√°ch" />
                  <div class="product-icons">
                    <span class="icon">üîç</span>
                    <span class="icon">üõí</span>
                  </div>
                </div>
                <div class="product-info">
                  <h5 class="product-title">{{this.TenSanPham}}</h5>
                  <div class="product-price">
                    <span class="new-price">{{formatNumber this.Gia}}</span>
                  </div>
                </div>
              </div>
            </a>
          </div>
        </div>
        {{/each}}
      </div>

      <!-- Ph√¢n trang -->
      <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center mt-4">
          <li class="page-item {{#if (eq currentPage 1)}}disabled{{/if}}">
            <a class="page-link" href="{{paginationURL (subtract currentPage 1)}}" tabindex="-1">Previous</a>
          </li>

          {{#each (range 1 totalPages)}}
          <li class="page-item {{#if (eq ../currentPage this)}}active{{/if}}">
            <a class="page-link" href="{{paginationURL this}}">{{this}}</a>
          </li>
          {{/each}}

          <li class="page-item {{#if (eq currentPage totalPages)}}disabled{{/if}}">
            <a class="page-link" href="{{paginationURL (add currentPage 1)}}">Next</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>
