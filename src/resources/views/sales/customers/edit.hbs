{{#block "css"}}
  <link rel="stylesheet" href="/css/sales/style.css" />
  <link rel="stylesheet" href="/css/sales/createEditCustomer.css" />
{{/block}}
{{#block "js"}}
  {{!-- <script src="/js/sales/customers.js"></script> --}}
  <script src="/js/sales/customerValidate.js"></script>
{{/block}}

<div class="main-content">
  <div class="customer-content">
    <div class="customer-header">
      <h2 class="customer-title">Sửa Thông Tin Khách Hàng</h2>
      
      <!-- Breadcrumb -->
      <div class="breadcrumb">
        <a href="/admin/sales/khachhang">Danh sách khách hàng</a> / 
        <span>Sửa thông tin khách hàng</span>
      </div>
    </div>
      <!-- Form chỉnh sửa khách hàng -->
    <div class="customer-form-container">
      <!-- Thông báo sẽ hiển thị ở đây -->
      <div id="successMessage" class="success-message" style="display: none;"></div>
      <div id="errorMessage" class="error-message" style="display: none;"></div>
      
      <form id="createCustomerForm" class="customer-form" action="/admin/sales/khachhang/update/{{customerDetails.ID_KH}}" method="POST">
        <input type="hidden" name="ID_KH" value="{{customerDetails.ID_KH}}">
          <div class="form-group">
          <label for="TenKH">Tên khách hàng <span class="required">*</span></label>
          <input type="text" id="TenKH" name="TenKH" value="{{formData.TenKH}}" required>
          <div class="field-error" id="TenKH-error"></div>
        </div>
        
        <div class="form-group">
          <label for="TenTK">Tên tài khoản</label>
          <input type="text" id="TenTK" name="TenTK" value="{{formData.TenTK}}">
          <div class="field-error" id="TenTK-error"></div>
        </div>
        
        <div class="form-group">
          <label for="MatKhau">Mật khẩu</label>
          <input type="password" id="MatKhau" name="MatKhau" placeholder="Để trống nếu không thay đổi mật khẩu">
          <small class="form-hint">Để trống nếu không muốn thay đổi mật khẩu</small>
          <div class="field-error" id="MatKhau-error"></div>
        </div>
          <div class="form-group">
          <label for="SDT">Số điện thoại</label>
          <input type="text" id="SDT" name="SDT" value="{{formData.SDT}}">
          <div class="field-error" id="SDT-error"></div>
        </div>
        
        <div class="form-group">
          <label for="NgaySinh">Ngày sinh</label>
          <input type="date" id="NgaySinh" name="NgaySinh" value="{{#if formData.NgaySinh}}{{formatDate formData.NgaySinh 'YYYY-MM-DD'}}{{/if}}">
        </div>
        
        <div class="form-group">
          <label for="Active">Trạng thái</label>
          <select id="Active" name="Active">
            <option value="1" {{#if formData.Active}}selected{{/if}}>Hoạt động</option>
            <option value="0" {{#unless formData.Active}}selected{{/unless}}>Không hoạt động</option>
          </select>
        </div>
        
        <div class="form-actions">
          <button type="submit" class="btn-save">Lưu thay đổi</button>
          <a href="/admin/sales/khachhang" class="btn-cancel">Hủy</a>
        </div>      </form>
    </div>
  </div>
</div>

<!-- CSS for error and success messages -->
<style>
  .error-message { 
    background-color: #fff5f5;
    border-left: 4px solid #f56565; 
    color: #c53030; 
    padding: 12px 16px;
    margin-bottom: 20px; 
    border-radius: 4px; 
    font-weight: 500; 
  } 
  
  .success-message {
    background-color: #f0fff4;
    border-left: 4px solid #48bb78;
    color: #276749;
    padding: 12px 16px;
    margin-bottom: 20px;
    border-radius: 4px;
    font-weight: 500;
  }
  .error-message { 
    background-color: #fff5f5;
    border-left: 4px solid #f56565; 
    color: #c53030; 
    padding: 12px 16px;
    margin-bottom: 20px; 
    border-radius: 4px; 
    font-weight: 500; 
  } 
  
  .success-message {
    background-color: #f0fff4;
    border-left: 4px solid #48bb78;
    color: #276749;
    padding: 12px 16px;
    margin-bottom: 20px;
    border-radius: 4px;
    font-weight: 500;
  }
  
  .field-error {
    color: #e53e3e; 
    font-size: 13px; 
    margin-top: 4px; 
    display: none; 
  }
  
  .input-error { 
    border-color: #f56565 !important; 
    background-color: #fff5f5 !important; 
  } 
  
  .input-error:focus { 
    box-shadow: 0 0 0 3px rgba(245, 101, 101, 0.2) !important; 
  }
</style>

